(this.webpackJsonpnappulapeli=this.webpackJsonpnappulapeli||[]).push([[0],{16:function(e,t,a){e.exports=a.p+"static/media/Koodarijahti_tunnus.12b65193.svg"},18:function(e,t,a){},29:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){e.exports=a.p+"static/media/vincit_logo_red.3fb72115.jpg"},53:function(e,t,a){e.exports=a(99)},59:function(e,t,a){},64:function(e,t,a){},93:function(e,t){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(46),l=a.n(c),o=a(4),s=a.n(o),u=a(8),i=a(2),m=function(){return r.a.createElement("div",{class:"alert alert-danger"},r.a.createElement("strong",null,"TUNNUS ON OLEMASSA")," Valitse uusi k\xe4ytt\xe4j\xe4tunnus")},p=a(47),f=a.n(p),E=a(9),b="https://vincgameserver.herokuapp.com",v=(a(59),a(18),a(29),a(19),function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(!1),p=Object(i.a)(o,2),v=p[0],g=p[1],d=Object(n.useState)(!1),O=Object(i.a)(d,2),j=O[0],N=O[1];Object(n.useEffect)((function(){null!==localStorage.getItem("USERNAME")&&g(!0)}),[]);var h=function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/doesexists?userName="+t);case 2:return a=e.sent,e.next=5,a.status;case 5:200===e.sent?g(!0):N(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!0===v?(null===localStorage.getItem("USERNAME")&&(localStorage.setItem("USERNAME",c),localStorage.setItem("COUNTER",20)),r.a.createElement(E.a,{to:{pathname:"/game",state:{name:c}}})):r.a.createElement("div",{className:"login-clean"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h(c)}},r.a.createElement("img",{src:f.a,alt:"Amazing Vincit Logo"}),j&&r.a.createElement(m,null),r.a.createElement("div",{className:"illustration"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){l(e.target.value)},maxLength:"9"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Pelaa"))))}),g=a(16),d=a.n(g),O=function(){var e=Object(n.useState)(0),t=Object(i.a)(e,2),a=t[0],c=t[1],l=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/playersonline");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.online,c(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),r.a.createElement("div",{className:"body"},r.a.createElement("img",{src:d.a,alt:"Coding Duck",className:"img"}),r.a.createElement("a",null,a," Pelaajaa peliss\xe4"),r.a.createElement(v,null))},j=(a(64),function(e){var t=e.counter;return r.a.createElement("label",{className:"counter"},t)}),N=a(50),h=a(51),S=a(52),k=a.n(S),y=function(){function e(t,a){Object(N.a)(this,e),console.log("Connection established"),this.socket=k()("wss://vincgameserver.herokuapp.com/",{query:{name:t,counter:a},reconnection:!0,reconnectionDelay:500,reconnectionAttempts:10})}return Object(h.a)(e,[{key:"getSocket",value:function(){return this.socket}}]),e}(),w=a(10),x=a.n(w),I=(a(96),function(e){return r.a.createElement("table",{id:"scoreboard",className:"table striped"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"header"},r.a.createElement("th",null,"K\xe4ytt\xe4j\xe4tunnus"),r.a.createElement("th",null,"Pisteet")),e.players.map((function(e){return r.a.createElement("tr",{key:e[0]},r.a.createElement("td",null,e[0]),r.a.createElement("td",null,e[1]))}))),r.a.createElement("tbody",null))});I.prototype={props:x.a.object};var C=I,U=function(e){var t=e.winpoints,a=e.onClick;return r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:a},"\xd7"),r.a.createElement("strong",null,"VOITTO!")," VOITIT ",t," pistett\xe4")},T=function(){return r.a.createElement("div",{className:"alert alert-danger"},r.a.createElement("strong",null,"H\xc4VISIT")," Haluatko pelata uudelleen?")},R=(a(97),a(45),!1),A=function(){var e=Object(n.useState)(20),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),o=Object(i.a)(l,2),m=o[0],p=o[1],f=Object(n.useState)(),E=Object(i.a)(f,2),v=E[0],g=E[1],d=Object(n.useState)(0),O=Object(i.a)(d,2),N=O[0],h=O[1],S=Object(n.useState)(!1),k=Object(i.a)(S,2),w=k[0],x=k[1],I=Object(n.useState)([]),A=Object(i.a)(I,2),P=A[0],M=A[1],D=Object(n.useState)(!1),V=Object(i.a)(D,2),K=V[0],L=V[1];Object(n.useEffect)((function(){var e=_(),t=new y(e,localStorage.getItem("COUNTER"));g(t.getSocket()),c(parseInt(localStorage.getItem("COUNTER"))),t.getSocket().on("points",(function(e){M(e.playerlist),p(e.win)}))}),[]),Object(n.useEffect)((function(){0===a&&(x(!0),L(!0)),localStorage.setItem("COUNTER",a)}),[a]);var _=function(){return localStorage.getItem("USERNAME")},B=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==a){e.next=11;break}return e.next=4,fetch(b+"/restartgame?userName="+_());case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,x(!1),c(r.points),L(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-clean"},r.a.createElement("form",{onSubmit:B},r.a.createElement("p",{className:"username"},_()),N>0&&!1===K&&r.a.createElement(U,{winpoints:N,onClick:function(){return h(0)}}),!0===w&&r.a.createElement(T,null),r.a.createElement("div",{className:"illustration"}),r.a.createElement("div",{className:"form-group"},r.a.createElement("a",null,"Omat pisteet"),r.a.createElement(j,{counter:a}),r.a.createElement("a",null,"Tarvittavat pisteet seuraavaan voittoon"),m>0&&r.a.createElement(j,{counter:m})),r.a.createElement("div",{className:"form-group"},!1===w&&r.a.createElement("div",{onClick:function(){v.emit("game"),v.emit("serverpoints"),R=!1,v.on("number",(function(e){c(e.playerPoints),!1===R&&(e.points>0?(h(e.points),L(!1)):(c(e.playerPoints),0===e.playerPoints&&x(!0)),R=!0)}))},className:"button"},r.a.createElement("a",{style:{color:"black"},className:"noselect"},"Paina")),!0===w&&r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Pelaa uudelleen"))),r.a.createElement(C,{players:P})))},P=(a(98),function(e){var t=Object(n.useState)(!0),a=Object(i.a)(t,2),c=a[0],l=a[1],o=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+"/logout?userName="+localStorage.getItem("USERNAME"));case 2:return t=e.sent,e.next=5,t.status;case 5:200===e.sent&&l(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!1===c?(localStorage.removeItem("USERNAME"),localStorage.removeItem("COUNTER"),r.a.createElement(E.a,{to:{pathname:"/"}})):r.a.createElement("div",{className:"body"},r.a.createElement("img",{src:d.a,alt:"Coding Duck",className:"img"}),r.a.createElement("button",{className:"logoutbutton",onClick:o},"Kirjaudu ulos"),r.a.createElement(A,null))}),M=a(15);var D=function(){return r.a.createElement("div",null,r.a.createElement(M.a,{basename:"/nappulapeli"},r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(O,e)}}),r.a.createElement(E.b,{exact:!0,path:"/game",render:function(e){return r.a.createElement(P,e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.29cd2e5d.chunk.js.map