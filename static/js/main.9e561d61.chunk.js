(this.webpackJsonpnappulapeli=this.webpackJsonpnappulapeli||[]).push([[0],{15:function(e,t,a){e.exports=a.p+"static/media/Koodarijahti_tunnus.12b65193.svg"},29:function(e,t,a){},30:function(e,t,a){},47:function(e,t,a){e.exports=a.p+"static/media/vincit_logo_red.3fb72115.jpg"},52:function(e,t,a){e.exports=a(98)},58:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},94:function(e,t){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(46),o=a.n(r),l=a(10),s=a.n(l),i=a(14),u=a(4),m=(a(58),a(29),a(30),a(17),a(47)),f=a.n(m),p=a(7),E=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),r=a[0],o=a[1],l=Object(n.useState)(!1),m=Object(u.a)(l,2),E=m[0],g=m[1],b=Object(n.useState)(!1),v=Object(u.a)(b,2),d=v[0],O=v[1];Object(n.useEffect)((function(){null!==localStorage.getItem("USERNAME")&&g(!0)}),[]);var h=function(){var e=Object(i.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://vincgameserver.herokuapp.com/doesExists?userName="+t);case 2:return a=e.sent,e.next=5,a.status;case 5:200===e.sent?g(!0):O(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!0===E?(null===localStorage.getItem("USERNAME")&&(localStorage.setItem("USERNAME",r),localStorage.setItem("COUNTER",20)),c.a.createElement(p.a,{to:{pathname:"/game",state:{name:r}}})):c.a.createElement("div",{className:"login-clean"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),h(r)}},c.a.createElement("img",{src:f.a,alt:"Amazing Vincit Logo"}),d&&c.a.createElement("div",{class:"alert alert-danger"},c.a.createElement("strong",null,"TUNNUS ON OLEMASSA")," Valitse uusi k\xe4ytt\xe4j\xe4tunnus"),c.a.createElement("div",{className:"illustration"}),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",placeholder:"K\xe4ytt\xe4j\xe4tunnus",onChange:function(e){o(e.target.value)}})),c.a.createElement("div",{className:"form-group"},c.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit"},"Pelaa"))))},g=a(15),b=a.n(g),v=function(){var e=Object(n.useState)(0),t=Object(u.a)(e,2),a=t[0],r=t[1],o=function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://vincgameserver.herokuapp.com/playersOnline");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n=a.online,r(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),c.a.createElement("div",{className:"body"},c.a.createElement("img",{src:b.a,alt:"Coding Duck"}),c.a.createElement("a",null,a," Pelaajaa peliss\xe4"),c.a.createElement(E,null))},d=(a(63),a(64),a(65),function(e){var t=e.counter;return c.a.createElement("label",{className:"counter"},t)}),O=a(24),h=a.n(O),j=(a(97),a(50)),S=a(51),N=function(){function e(t,a){Object(j.a)(this,e),console.log("Connection established"),this.socket=h()("wss://vincgameserver.herokuapp.com/",{query:{name:t,counter:a},reconnection:!0,reconnectionDelay:500,reconnectionAttempts:10})}return Object(S.a)(e,[{key:"getSocket",value:function(){return this.socket}}]),e}(),k=!1,y=function(e){var t=Object(n.useState)(20),a=Object(u.a)(t,2),r=a[0],o=a[1],l=Object(n.useState)(0),s=Object(u.a)(l,2),i=s[0],m=s[1],f=Object(n.useState)(),p=Object(u.a)(f,2),E=p[0],g=p[1],b=Object(n.useState)(0),v=Object(u.a)(b,2),O=v[0],h=v[1];Object(n.useEffect)((function(){console.log("Saving Socket...");var e=j(),t=new N(e,localStorage.getItem("COUNTER"));g(t.getSocket()),o(parseInt(localStorage.getItem("COUNTER"))),t.getSocket().on("points",(function(e){m(e)}))}),[]),Object(n.useEffect)((function(){localStorage.setItem("COUNTER",r)}),[r]);var j=function(){return localStorage.getItem("USERNAME")};return c.a.createElement("div",{className:"login-clean"},c.a.createElement("form",null,O>0&&c.a.createElement("div",{class:"alert alert-success"},c.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:function(){return h(0)}},"\xd7"),c.a.createElement("strong",null,"VOITTO!")," VOITIT ",O),c.a.createElement("div",{className:"illustration"}),c.a.createElement("div",{className:"form-group"},c.a.createElement(d,{counter:r}),c.a.createElement(d,{counter:i})),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{onClick:function(){E.emit("game"),E.emit("serverpoints"),k=!1,E.on("number",(function(e){o(e.playerPoints),!1===k&&(e.points>0?h(e.points):o(e.playerPoints),k=!0)}))},className:"button"},c.a.createElement("a",{style:{color:"black",outline:0}},"Paina")))))},w=function(e){return c.a.createElement("div",{className:"body"},c.a.createElement("img",{src:b.a,alt:"Coding Duck"}),c.a.createElement(y,null))},I=a(25);var x=function(){return c.a.createElement("div",null,c.a.createElement(I.a,{basename:"/nappulapeli"},c.a.createElement(p.d,null,c.a.createElement(p.b,{exact:!0,path:"/",render:function(e){return c.a.createElement(v,e)}}),c.a.createElement(p.b,{exact:!0,path:"/game",render:function(e){return c.a.createElement(w,e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.9e561d61.chunk.js.map